{% extends 'base.html.twig' %}

{% block body %}
    <section class="bg-white dark:bg-gray-900 flex items-center flex-col">

        <!-- Titulo -->
        <div class="py-6 px-4 mx-auto max-w-screen-xl text-center lg:py-16 lg:px-12">
            <h1 class="text-2xl font-extrabold tracking-tight leading-none text-gray-900 md:text-3xl lg:text-4xl dark:text-white">Firma de Archivos</h1>
        </div>

        <!-- Tabla -->
        
    <div class="w-11/12 relative overflow-x-auto shadow-md sm:rounded-lg mx-auto">
        <table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400">
            <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                <tr>
                    <th scope="col" class="px-6 py-3 mr-7">
                        <div class="flex items-center">
                            <input id="checkbox-all-search" type="checkbox" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                            <label for="checkbox-all-search" class="ml-2 font-extrabold text-center text-gray-800">Checkbox (seleccionar)</label>
                        </div>
                    </th>
                    <th scope="col" class="px-6 py-3 font-extrabold text-center text-gray-800">
                        Nombre de archivo
                    </th>
                    <th scope="col" class="px-6 py-3 font-extrabold text-center text-gray-800">
                        Referencia del documento
                    </th>
                    <th scope="col" class="px-6 py-3 font-extrabold text-center text-gray-800">
                        Usuario emisor
                    </th>
                    <th scope="col" class="px-6 py-3 font-extrabold text-center text-gray-800">
                        Fecha emisor
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600">
                    <td class="w-4 p-4">
                        <div class="flex items-center">
                            <input id="checkbox-table-search-1" type="checkbox" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                            <label for="checkbox-table-search-1" class="sr-only">checkbox</label>
                        </div>
                    </td>
                    <th scope="row" class="px-6 py-4 text-center font-medium text-gray-900 whitespace-nowrap dark:text-white">
                        Documento 1
                    </th>
                    <td class="px-6 py-4 text-center">
                        Referencia 1
                    </td>
                    <td class="px-6 py-4 text-center">
                        Nombre 1
                    </td>
                    <td class="px-6 py-4 text-center">
                        07/12/2023
                    </td>
                </tr>
                <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600">
                    <td class="w-4 p-4">
                        <div class="flex items-center">
                            <input id="checkbox-table-search-2" type="checkbox" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                            <label for="checkbox-table-search-2" class="sr-only">checkbox</label>
                        </div>
                    </td>
                    <th scope="row" class="px-6 py-4 text-center font-medium text-gray-900 whitespace-nowrap dark:text-white">
                        Documento 2
                    </th>
                    <td class="px-6 py-4 text-center">
                        Referencia 2
                    </td>
                    <td class="px-6 py-4 text-center">
                        Nombre 2
                    </td>
                    <td class="px-6 py-4 text-center">
                        07/12/2023
                    </td>
                </tr>
                <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600">
                    <td class="w-4 p-4">
                        <div class="flex items-center">
                            <input id="checkbox-table-search-3" type="checkbox" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                            <label for="checkbox-table-search-3" class="sr-only">checkbox</label>
                        </div>
                    </td>
                    <th scope="row" class="px-6 py-4 text-center font-medium text-gray-900 whitespace-nowrap dark:text-white">
                        Documento 3
                    </th>
                    <td class="px-6 py-4 text-center">
                        Referencia 3
                    </td>
                    <td class="px-6 py-4 text-center">
                        Nombre 3
                    </td>
                    <td class="px-6 py-4 text-center">
                        07/12/2023
                    </td>
                </tr>
                <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600">
                    <td class="w-4 p-4">
                        <div class="flex items-center">
                            <input id="checkbox-table-search-3" type="checkbox" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                            <label for="checkbox-table-search-3" class="sr-only">checkbox</label>
                        </div>
                    </td>
                    <th scope="row" class="px-6 py-4 text-center font-medium text-gray-900 whitespace-nowrap dark:text-white">
                        Documento 4
                    </th>
                    <td class="px-6 py-4 text-center">
                        Referencia 4
                    </td>
                    <td class="px-6 py-4 text-center">
                        Nombre 4
                    </td>
                    <td class="px-6 py-4 text-center">
                        07/12/2023
                    </td>
                </tr>
                <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600">
                    <td class="w-4 p-4">
                        <div class="flex items-center">
                            <input id="checkbox-table-search-3" type="checkbox" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                            <label for="checkbox-table-search-3" class="sr-only">checkbox</label>
                        </div>
                    </td>
                    <th scope="row" class="px-6 py-4 text-center font-medium text-gray-900 whitespace-nowrap dark:text-white">
                        Documento 5
                    </th>
                    <td class="px-6 py-4 text-center">
                        Referencia 5
                    </td>
                    <td class="px-6 py-4 text-center">
                        Nombre 5
                    </td>
                    <td class="px-6 py-4 text-center">
                        07/12/2023
                    </td>
                </tr>
                <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600">
                    <td class="w-4 p-4">
                        <div class="flex items-center">
                            <input id="checkbox-table-search-3" type="checkbox" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                            <label for="checkbox-table-search-3" class="sr-only">checkbox</label>
                        </div>
                    </td>
                    <th scope="row" class="px-6 py-4 text-center font-medium text-gray-900 whitespace-nowrap dark:text-white">
                        Documento 6
                    </th>
                    <td class="px-6 py-4 text-center">
                        Referencia 6
                    </td>
                    <td class="px-6 py-4 text-center">
                        Nombre 6
                    </td>
                    <td class="px-6 py-4 text-center">
                        07/12/2023
                    </td>
                </tr>
                <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600">
                    <td class="w-4 p-4">
                        <div class="flex items-center">
                            <input id="checkbox-table-search-3" type="checkbox" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                            <label for="checkbox-table-search-3" class="sr-only">checkbox</label>
                        </div>
                    </td>
                    <th scope="row" class="px-6 py-4 text-center font-medium text-gray-900 whitespace-nowrap dark:text-white">
                        Documento 7
                    </th>
                    <td class="px-6 py-4 text-center">
                        Referencia 7
                    </td>
                    <td class="px-6 py-4 text-center">
                        Nombre 7
                    </td>
                    <td class="px-6 py-4 text-center">
                        07/12/2023
                    </td>
                </tr>
                <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600">
                    <td class="w-4 p-4">
                        <div class="flex items-center">
                            <input id="checkbox-table-search-3" type="checkbox" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                            <label for="checkbox-table-search-3" class="sr-only">checkbox</label>
                        </div>
                    </td>
                    <th scope="row" class="px-6 py-4 text-center font-medium text-gray-900 whitespace-nowrap dark:text-white">
                        Documento 8
                    </th>
                    <td class="px-6 py-4 text-center">
                        Referencia 8
                    </td>
                    <td class="px-6 py-4 text-center">
                        Nombre 8
                    </td>
                    <td class="px-6 py-4 text-center">
                        07/12/2023
                    </td>
                </tr>
                <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600">
                    <td class="w-4 p-4">
                        <div class="flex items-center">
                            <input id="checkbox-table-search-3" type="checkbox" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                            <label for="checkbox-table-search-3" class="sr-only">checkbox</label>
                        </div>
                    </td>
                    <th scope="row" class="px-6 py-4 text-center font-medium text-gray-900 whitespace-nowrap dark:text-white">
                        Documento 9
                    </th>
                    <td class="px-6 py-4 text-center">
                        Referencia 9
                    </td>
                    <td class="px-6 py-4 text-center">
                        Nombre 9
                    </td>
                    <td class="px-6 py-4 text-center">
                        07/12/2023
                    </td>
                </tr>
                <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600">
                    <td class="w-4 p-4">
                        <div class="flex items-center">
                            <input id="checkbox-table-search-3" type="checkbox" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                            <label for="checkbox-table-search-3" class="sr-only">checkbox</label>
                        </div>
                    </td>
                    <th scope="row" class="px-6 py-4 text-center font-medium text-gray-900 whitespace-nowrap dark:text-white">
                        Documento 10
                    </th>
                    <td class="px-6 py-4 text-center">
                        Referencia 10
                    </td>
                    <td class="px-6 py-4 text-center">
                        Nombre 10
                    </td>
                    <td class="px-6 py-4 text-center">
                        07/12/2023
                    </td>
                </tr>
            </tbody>
        </table>
        <nav class="flex items-center flex-column flex-wrap md:flex-row justify-between pt-4" aria-label="Table navigation">
            <span class="pl-3 text-sm font-normal text-gray-500 dark:text-gray-400 mb-4 md:mb-0 block w-full md:inline md:w-auto">Mostrando <span class="font-semibold text-gray-900 dark:text-white">1-25</span> de <span class="font-semibold text-gray-900 dark:text-white">1000</span></span>
            <ul class="inline-flex -space-x-px rtl:space-x-reverse text-sm h-8">
                <li>
                    <a href="#" id="prevPage" class="navA ms-0 rounded-l-lg dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">Anterior</a>
                </li>
                <li>
                    <a href="#" data-page="1" class="navA dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">1</a>
                </li>
                <li>
                    <a href="#" data-page="2" class="navA dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">2</a>
                </li>
                <li>
                    <a href="#" data-page="3" class="navA dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">3</a>
                </li>
                <li>
                    <a href="#" data-page="4" class="navA dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">4</a>
                </li>
                <li>
                    <a href="#" data-page="5" class="navA dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">5</a>
                </li>
                <li>
                <a href="#" id="nextPage" class="navA rounded-r-lg dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">Siguiente</a>
                </li>
            </ul>
        </nav>
    </div>

        <!-- Botones de acción -->
        <div class="mt-11 w-full flex justify-center">
            <button onclick="cancel()" type="button" class="w-48 ml-2 mr-2 px-4 py-2 bg-red-400 text-white rounded-lg">Cancelar/Volver</button>
            <button onclick="signSelected()" type="submit" class="sign-selected w-48 ml-2 mr-2 px-4 py-2 bg-green-400 text-white rounded-lg">Firmar seleccionados</button>
            <button onclick="signAll()" type="submit" class="w-48 ml-2 mr-2 px-4 py-2 bg-blue-400 text-white rounded-lg">Firmar todo</button>
        </div>

    </section>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Referencias a elementos
    const selectAllCheckbox = document.getElementById('checkbox-all-search');
    // Obtener todos los otros checkboxes en la tabla
    const checkboxes = document.querySelectorAll('input[type="checkbox"]:not(#checkbox-all-search)');
    const signSelectedButton = document.querySelector('.sign-selected');

    // Habilitar/Deshabilitar botón de 'Firmar seleccionados'
    function updateSignSelectedButton() {
        let anyChecked = Array.from(checkboxes).some(checkbox => checkbox.checked);
        signSelectedButton.disabled = !anyChecked;

    // Cambiar la clase del botón dependiendo de si está habilitado o no
        if (signSelectedButton.disabled) {
            signSelectedButton.classList.add('button-disabled');
        } else {
            signSelectedButton.classList.remove('button-disabled');
        }
    }

    // Evento para marcar/desmarcar todas las casillas
    selectAllCheckbox.addEventListener('change', function() {
        checkboxes.forEach(checkbox => {
            checkbox.checked = this.checked;
        });
        updateSignSelectedButton();
    });

    // Evento para cada casilla individual
    checkboxes.forEach(checkbox => {
        checkbox.addEventListener('change', updateSignSelectedButton);
    });

    // Inicialmente, el botón 'Firmar seleccionados' está deshabilitado
    updateSignSelectedButton();

    
    const rowsPerPage = 2;
    const rows = document.querySelectorAll('table tbody tr');
    const totalRows = rows.length;
    let currentPage = 1;

    // Función para actualizar la tabla para una página específica
    function paginateTable(page) {
        const start = (page - 1) * rowsPerPage;
        const end = start + rowsPerPage;

        rows.forEach((row, index) => {
            row.style.display = (index >= start && index < end) ? '' : 'none';
        });

        // Remover la clase activa de todos los botones de página
        document.querySelectorAll('.navA[data-page]').forEach(button => {
            button.classList.remove('active-page');
        });

        // Agregar la clase activa al botón de la página actual
        document.querySelector('.navA[data-page="' + page + '"]').classList.add('active-page');
    }

    // Función para manejar clics en los botones de paginación
    function onPaginationClick(event) {
        const button = event.target;
        const pageNumber = button.dataset.page;

        if (pageNumber) {
            currentPage = parseInt(pageNumber, 10);
            paginateTable(currentPage);
        } else if (button.id === 'prevPage') {
            if (currentPage > 1) currentPage--;
            paginateTable(currentPage);
        } else if (button.id === 'nextPage') {
            if (currentPage * rowsPerPage < totalRows) currentPage++;
            paginateTable(currentPage);
        }
    }

    // Agregar listeners a los botones de paginación
    document.querySelectorAll('.navA').forEach(button => {
        button.addEventListener('click', onPaginationClick);
    });

    // Inicializar la tabla en la primera página
    paginateTable(1);
});

// Función para 'Firmar todo'
function signAll() {
    // Obtener todas las filas de la tabla
    const allRows = document.querySelectorAll('table tbody tr');

    allRows.forEach(row => {
        // Aplicar una animación
        row.style.animation = 'fadeOut 0.5s';

        // Esperar a que termine la animación para eliminar la fila
        row.addEventListener('animationend', function() {
            row.remove();
        });
    });

    // Desactivar el checkbox 'Seleccionar todo'
    selectAllCheckbox.checked = false;

    // También desmarcar todos los checkboxes individuales
    checkboxes.forEach(checkbox => {
        checkbox.checked = false;
    });

    // Después de firmar, actualiza el estado del botón 'Firmar seleccionados'
    updateSignSelectedButton();
}

// Función para 'Firmar seleccionados'
function signSelected() {
    // Aquí va la lógica para firmar los documentos seleccionados
    // Obtener todos los checkboxes seleccionados
    const selectedCheckboxes = document.querySelectorAll('input[type="checkbox"]:not(#checkbox-all-search):checked');

    selectedCheckboxes.forEach(checkbox => {
        // Obtener la fila (tr) que contiene este checkbox
        const row = checkbox.closest('tr');

        // Aplicar una animación
        row.style.animation = 'fadeOut 0.5s';

        // Esperar a que termine la animación para eliminar la fila
        row.addEventListener('animationend', function() {
            row.remove();
        });
    });

    // Después de firmar, actualiza el estado del botón y del checkbox 'Seleccionar todo'
    updateSignSelectedButton();
    selectAllCheckbox.checked = false;
}

// Función para 'Cancelar/Volver'
function cancel() {
    // Aquí va la lógica para cancelar o volver
    window.history.back()
}

</script>

<style>
    .navA {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 0.75rem;
        height: 2rem;
        line-height: 1.25rem;
        color: #718096;
        background-color: #fff;
        border: 1px solid #e2e8f0;
        transition: background-color 0.3s, color 0.3s;

        &:hover {
            background-color: #edf2f7;
            color: #4a5568;
        }
    }

    .button-disabled {
        background-color: #9ca3af;
        cursor: not-allowed;
    }

    .active-page {
        background-color: #dbeafe;
        color: #2563eb;
        border-color: #d1d5db;

        &:hover {
            background-color: #dbeafe;
            color: #1d4ed8;
        }
    }

    @keyframes fadeOut {
        from {
            opacity: 1;
        }
        to {
            opacity: 0;
            visibility: hidden;
        }
    }
</style>

{% endblock %}